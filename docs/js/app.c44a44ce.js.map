{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?caaf","webpack:///./src/components/controls.vue?9196","webpack:///src/components/controls.vue","webpack:///./src/components/controls.vue?c575","webpack:///./src/components/controls.vue?1824","webpack:///./src/components/glviewer.vue?0c7b","webpack:///./src/webgl-util/shader.js","webpack:///./src/shader-srcs.js","webpack:///./src/niivue.js","webpack:///src/components/glviewer.vue","webpack:///./src/components/glviewer.vue?6836","webpack:///./src/components/glviewer.vue?6c54","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?2667","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/glviewer.vue?2e54","webpack:///./src/App.vue?d168","webpack:///./src/components/controls.vue?e3bc"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","overlayList","staticRenderFns","staticClass","model","callback","$$v","overlays","expression","_l","overlay","on","$event","stopPropagation","toggleEye","_s","eyeIcon","colorMaps","$set","intensityMax","intensityMin","scopedSlots","_u","fn","staticStyle","intensityRange","proxy","props","Array","components","draggable","colorSelected","overlays_","methods","onColorChange","console","log","event","idx","component","VBtn","VCol","VExpansionPanel","VExpansionPanelContent","VExpansionPanelHeader","VExpansionPanels","VIcon","VRangeSlider","VRow","VSelect","VSlider","VSpacer","VTextField","Shader","gl","vertexSrc","fragmentSrc","self","program","compileShader","regexUniform","matchUniformName","uniforms","vertexUnifs","match","fragUnifs","unif","forEach","getUniformLocation","use","useProgram","vert","frag","vs","createShader","VERTEX_SHADER","shaderSource","getShaderParameter","COMPILE_STATUS","alert","getShaderInfoLog","fs","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","vertSliceShader","fragSliceShader","vertLineShader","fragLineShader","colormapTexture","volumeTexture","sliceShader","lineShader","crosshairWidth","crosshairColor","crosshairPos","backColor","scaleTo8Bit","A","overlayItem","volume","mn","hdr","cal_min","mx","cal_max","vox","img8","Uint8ClampedArray","scale","v","scl_slope","scl_inter","calibrateIntensity","Infinity","isFinite","global_min","global_max","loadVolume","img","url","volumeURL","req","XMLHttpRequest","open","responseType","onerror","onload","dataBuffer","response","nii","send","init","uniform1i","updateGLVolume","cubeStrip","vao","createVertexArray","bindVertexArray","vbo","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","imgRaw","datatypeCode","Uint8Array","Int16Array","Uint16Array","deleteTexture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_3D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_R","CLAMP_TO_EDGE","TEXTURE_WRAP_S","TEXTURE_WRAP_T","pixelStorei","UNPACK_ALIGNMENT","texStorage3D","R8","dims","texSubImage3D","RED","UNSIGNED_BYTE","drawSlices","selectColormap","lutName","lut","makeLut","TEXTURE1","TEXTURE_2D","texStorage2D","RGBA8","texSubImage2D","RGBA","Rs","Gs","Bs","As","Is","idxLo","idxHi","idxRng","k","f","sliceScale","canvas","width","height","pixDims","longestAxis","Math","max","volScale","AR","clientHeight","clientWidth","mouseClick","x","y","glx","gly","w","h","clearColor","clear","COLOR_BUFFER_BIT","viewport","uniform1f","uniform4f","drawArrays","TRIANGLE_STRIP","finish","a","uniform4fv","shader","String","selectedOverlay","watch","deep","handler","onWindowResize","document","querySelector","viewer","offsetWidth","offsetHeight","mounted","glEl","id","appendChild","addEventListener","enable","CULL_FACE","cullFace","FRONT","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","controls","glviewer","VApp","VAppBar","VFooter","VMain","Vue","Vuetify","config","productionTip","vuetify","render","App","$mount"],"mappings":"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","file":"js/app.c44a44ce.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-app-bar',{attrs:{\"app\":\"\"}},[_vm._v(\" Toolbar \")]),_c('v-main',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('controls',{attrs:{\"overlays\":_vm.overlayList}})],1),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('glviewer',{attrs:{\"overlays\":_vm.overlayList}})],1)],1)],1),_c('v-footer',{attrs:{\"app\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_vm._v(\" coordinates: x, y, z \")]),_c('v-col',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_vm._v(\" region: N/A \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"controls\"}},[_c('v-row',{staticClass:\"my-2 mx-2 align-center\"},[_c('h3',[_vm._v(\"Overlay list\")]),_c('v-spacer'),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"small\":\"\"}},[_vm._v(\"Add overlay\")])],1),_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-expansion-panels',[_c('draggable',{staticClass:\"row mx-2 my-2\",model:{value:(_vm.overlays),callback:function ($$v) {_vm.overlays=$$v},expression:\"overlays\"}},_vm._l((_vm.overlays),function(overlay,i){return _c('v-expansion-panel',{key:i},[_c('v-expansion-panel-header',[_c('v-row',{staticClass:\"align-center\",attrs:{\"no-gutters\":\"\"}},[_c('v-icon',{staticClass:\"mx-2\"},[_vm._v(\" mdi-drag-horizontal-variant \")]),_c('v-icon',{staticClass:\"mx-2\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleEye($event)}}},[_vm._v(\" \"+_vm._s(_vm.eyeIcon)+\" \")]),_vm._v(_vm._s(overlay.name)+\" \")],1)],1),_c('v-expansion-panel-content',[_c('v-row',[_c('v-select',{attrs:{\"items\":_vm.colorMaps,\"label\":\"Color map\"},model:{value:(overlay.colorMap),callback:function ($$v) {_vm.$set(overlay, \"colorMap\", $$v)},expression:\"overlay.colorMap\"}})],1),_c('v-row',[_c('v-col',{staticClass:\"px-4\"},[_c('p',[_vm._v(\"Intensity range\")]),_c('v-range-slider',{staticClass:\"align-center\",attrs:{\"max\":overlay.intensityMax,\"min\":overlay.intensityMin,\"hide-details\":\"\"},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"value\":overlay.intensityRange[0],\"hide-details\":\"\",\"single-line\":\"\",\"type\":\"number\"},on:{\"change\":function($event){return _vm.$set(overlay.intensityRange, 0, $event)}}})]},proxy:true},{key:\"append\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"value\":overlay.intensityRange[1],\"hide-details\":\"\",\"single-line\":\"\",\"type\":\"number\"},on:{\"change\":function($event){return _vm.$set(overlay.intensityRange, 1, $event)}}})]},proxy:true}],null,true),model:{value:(overlay.intensityRange),callback:function ($$v) {_vm.$set(overlay, \"intensityRange\", $$v)},expression:\"overlay.intensityRange\"}})],1)],1),_c('v-row',[_c('v-col',[_c('p',[_vm._v(\"Opacity\")]),_c('v-slider',{attrs:{\"step\":\"1\",\"thumb-label\":\"\",\"ticks\":\"\"},model:{value:(overlay.opacity),callback:function ($$v) {_vm.$set(overlay, \"opacity\", $$v)},expression:\"overlay.opacity\"}})],1)],1)],1)],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <div id=\"controls\" >\n    <v-row class=\"my-2 mx-2 align-center\">\n      <h3>Overlay list</h3>\n      <v-spacer></v-spacer>\n      <v-btn class=\"mx-2\" small>Add overlay</v-btn>\n    </v-row>\n    <v-row no-gutters>\n      <v-expansion-panels>\n        <draggable class=\"row mx-2 my-2\" v-model=\"overlays\">\n          <v-expansion-panel\n          v-for=\"(overlay, i) in overlays\"\n          :key=\"i\">\n          <v-expansion-panel-header>\n            <v-row no-gutters class=\"align-center\">\n              <v-icon class=\"mx-2\"> mdi-drag-horizontal-variant </v-icon>\n              <v-icon class=\"mx-2\" @click.stop=\"toggleEye\"> {{ eyeIcon }} </v-icon>{{ overlay.name }}\n            </v-row>\n            \n          </v-expansion-panel-header>\n          <v-expansion-panel-content>\n            <v-row>\n              <v-select\n                :items=\"colorMaps\"\n                v-model=\"overlay.colorMap\"\n                label=\"Color map\">\n              </v-select>\n            </v-row>\n            <v-row>\n             <v-col class=\"px-4\">\n              <p>Intensity range</p>\n              <v-range-slider\n                v-model=\"overlay.intensityRange\"\n                :max=\"overlay.intensityMax\"\n                :min=\"overlay.intensityMin\"\n                hide-details\n                class=\"align-center\"\n              >\n                <template v-slot:prepend>\n                  <v-text-field\n                    :value=\"overlay.intensityRange[0]\"\n                    class=\"mt-0 pt-0\"\n                    hide-details\n                    single-line\n                    type=\"number\"\n                    style=\"width: 60px\"\n                    @change=\"$set(overlay.intensityRange, 0, $event)\"\n                  ></v-text-field>\n                </template>\n                <template v-slot:append>\n                  <v-text-field\n                    :value=\"overlay.intensityRange[1]\"\n                    class=\"mt-0 pt-0\"\n                    hide-details\n                    single-line\n                    type=\"number\"\n                    style=\"width: 60px\"\n                    @change=\"$set(overlay.intensityRange, 1, $event)\"\n                  ></v-text-field>\n                </template>\n              </v-range-slider>\n            </v-col> \n            </v-row>\n\n            <v-row>\n              <v-col>\n              <p>Opacity</p>\n                <v-slider\n                  v-model=\"overlay.opacity\"\n                  step=\"1\"\n                  thumb-label\n                  ticks\n                >\n                </v-slider>\n              </v-col>\n            </v-row>\n            \n          </v-expansion-panel-content>\n        </v-expansion-panel>\n\n        </draggable>\n      </v-expansion-panels>\n    </v-row>\n\n  </div>\n\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\n\nexport default {\n  props: {\n    overlays: Array,\n  },\n\n  name: 'controls',\n\n  components: {\n    draggable\n  },\n\n  data (){\n    return {\n      colorSelected: 'gray',\n      colorMaps:['gray', 'Plasma', 'Viridis', 'Inferno'],\n      eyeIcon: \"mdi-eye\",\n      overlays_: this.overlays\n      \n    }\n  },\n\n  methods: {\n    toggleEye: function() {\n      this.eyeIcon = this.eyeIcon == \"mdi-eye\" ? \"mdi-eye-off\" : \"mdi-eye\"\n    },\n\n    onColorChange: function(event, idx) {\n      console.log(event)\n      console.log(idx)\n    }\n  }\n\n};\n\n</script>\n\n<style scoped>\n\n#controls {\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./controls.vue?vue&type=template&id=7a52731c&scoped=true&\"\nimport script from \"./controls.vue?vue&type=script&lang=js&\"\nexport * from \"./controls.vue?vue&type=script&lang=js&\"\nimport style0 from \"./controls.vue?vue&type=style&index=0&id=7a52731c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a52731c\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRangeSlider } from 'vuetify/lib/components/VRangeSlider';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCol,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VIcon,VRangeSlider,VRow,VSelect,VSlider,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"viewer\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export var Shader = function(gl, vertexSrc, fragmentSrc) {\n    var self = this;\n    this.program = compileShader(gl, vertexSrc, fragmentSrc);\n\n    var regexUniform = /uniform[^;]+[ ](\\w+);/g\n    var matchUniformName = /uniform[^;]+[ ](\\w+);/\n\n    this.uniforms = {};\n\n    var vertexUnifs = vertexSrc.match(regexUniform);\n    var fragUnifs = fragmentSrc.match(regexUniform);\n\n    if (vertexUnifs) {\n        vertexUnifs.forEach(function(unif) {\n            var m = unif.match(matchUniformName);\n            self.uniforms[m[1]] = -1;\n        });\n    }\n    if (fragUnifs) {\n        fragUnifs.forEach(function(unif) {\n            var m = unif.match(matchUniformName);\n            self.uniforms[m[1]] = -1;\n        });\n    }\n\n    for (var unif in this.uniforms) {\n        this.uniforms[unif] = gl.getUniformLocation(this.program, unif);\n    }\n}\n\nShader.prototype.use = function(gl) {\n    gl.useProgram(this.program);\n}\n\n// Compile and link the shaders vert and frag. vert and frag should contain\n// the shader source code for the vertex and fragment shaders respectively\n// Returns the compiled and linked program, or null if compilation or linking failed\nexport var compileShader = function(gl, vert, frag){\n    var vs = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vs, vert);\n    gl.compileShader(vs);\n    if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)){\n        alert(\"Vertex shader failed to compile, see console for log\");\n        console.log(gl.getShaderInfoLog(vs));\n        return null;\n    }\n\n    var fs = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fs, frag);\n    gl.compileShader(fs);\n    if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)){\n        alert(\"Fragment shader failed to compile, see console for log\");\n        console.log(gl.getShaderInfoLog(fs));\n        return null;\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vs);\n    gl.attachShader(program, fs);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)){\n        alert(\"Shader failed to link, see console for log\");\n        console.log(gl.getProgramInfoLog(program));\n        return null;\n    }\n    return program;\n}\n\nexport var getGLExtension = function(gl, ext) {\n    if (!gl.getExtension(ext)) {\n        alert(\"Missing \" + ext + \" WebGL extension\");\n        return false;\n    }\n    return true;\n}\n\n","\nexport var vertShader =\n`#version 300 es\n#line 4\nlayout(location=0) in vec3 pos;\nuniform mat4 proj_view;\nuniform vec3 eye_pos;\nuniform vec3 volume_scale;\nout vec3 vray_dir;\nflat out vec3 transformed_eye;\nvoid main(void) {\n\tvec3 volume_translation = vec3(0.5) - volume_scale * 0.5;\n\tgl_Position = proj_view * vec4(pos * volume_scale + volume_translation, 1);\n\ttransformed_eye = (eye_pos - volume_translation) / volume_scale;\n\tvray_dir = pos - transformed_eye;\n}`;\n\nexport var fragShaderLighting =\n`#version 300 es\n#line 20\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D volume;\nuniform highp sampler3D gradients;\nuniform highp sampler2D colormap;\nuniform ivec3 volume_dims;\nuniform float dt_scale;\nuniform vec3 light_pos;\nin vec3 vray_dir;\nflat in vec3 transformed_eye;\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// Pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nvoid main(void) {\n\tfloat ambient = 1.0;\n\tfloat diffuse = 0.2;\n\tfloat specular = 0.2;\n\tfloat shininess = 10.0;\n\tvec3 ray_dir = normalize(vray_dir);\n\tvec3 lightPosition = normalize(light_pos) ;\n\tvec3 lightdir = normalize(ray_dir);\n\tvec2 t_hit = intersect_box(transformed_eye, ray_dir);\n\tif (t_hit.x > t_hit.y)\n\t\tdiscard;\n\tt_hit.x = max(t_hit.x, 0.0);\n\tvec3 dt_vec = 1.0 / (vec3(volume_dims) * abs(ray_dir));\n\tfloat dt = dt_scale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 640.0 * gl_FragCoord.y));\n\tvec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tfloat val = texture(volume, p).r;\n\t\tvec4 val_color = texture(colormap, vec2(val, 0.5)).rgba;\n\t\t//use gradients to estimate 'a'mbient, 'd'iffuse and 's'pecular lighting\n\t\tvec4 gradSample= texture(gradients, p);\n\t\tgradSample.rgb = normalize(gradSample.rgb*2.0 - 1.0);\n\t\tfloat lightNormDot = dot(gradSample.rgb, lightPosition); //with respect to light location\n\t\tvec3 a = val_color.rgb * ambient;\n\t\tvec3 d = max(lightNormDot, 0.0) * val_color.rgb * diffuse;\n\t\tfloat s =   specular * pow(max(dot(reflect(lightPosition, gradSample.rgb), lightdir), 0.0), shininess);\n\t\tval_color.rgb = a + d + s; //color = ambient + diffuse + specular\n\t\t//accumulate color:\n\t\tval_color.a = 1.0-pow((1.0 - val_color.a), dt_scale); //opacityCorrection\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95)\n\t\t\tbreak;\n\t\tp += ray_dir * dt;\n\t}\n}`;\n\nexport var fragShaderGradients =\n`#version 300 es\n#line 97\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D gradients;\nuniform ivec3 volume_dims;\nuniform float dt_scale;\nin vec3 vray_dir;\nflat in vec3 transformed_eye;\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// Pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nvoid main(void) {\n\tvec3 ray_dir = normalize(vray_dir);\n\tvec2 t_hit = intersect_box(transformed_eye, ray_dir);\n\tif (t_hit.x > t_hit.y)\n\t\tdiscard;\n\tt_hit.x = max(t_hit.x, 0.0);\n\tvec3 dt_vec = 1.0 / (vec3(volume_dims) * abs(ray_dir));\n\tfloat dt = dt_scale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 640.0 * gl_FragCoord.y));\n\tvec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tvec4 gradSample = texture(gradients, p);\n\t\tvec4 val_color = gradSample;\n\t\t//val_color.rgb = abs((gradSample.rgb * 2.0) - 1.0); //optional\n\t\t//accumulate color:\n\t\tval_color.a = 1.0-pow((1.0 - val_color.a), dt_scale); //opacityCorrection\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95)\n\t\t\tbreak;\n\t\tp += ray_dir * dt;\n\t}\n}`;\n\n\nexport var fragShader =\n`#version 300 es\n#line 159\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D volume;\nuniform highp sampler2D colormap;\nuniform ivec3 volume_dims;\nuniform float dt_scale;\nin vec3 vray_dir;\nflat in vec3 transformed_eye;\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// Pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nvoid main(void) {\n\tvec3 ray_dir = normalize(vray_dir);\n\tvec2 t_hit = intersect_box(transformed_eye, ray_dir);\n\tif (t_hit.x > t_hit.y)\n\t\tdiscard;\n\tt_hit.x = max(t_hit.x, 0.0);\n\tvec3 dt_vec = 1.0 / (vec3(volume_dims) * abs(ray_dir));\n\tfloat dt = dt_scale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 640.0 * gl_FragCoord.y));\n\tvec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tfloat val = texture(volume, p).r;\n\t\tvec4 val_color = texture(colormap, vec2(val, 0.5)).rgba;\n\t\tval_color.a = 1.0-pow((1.0 - val_color.a), dt_scale); //opacityCorrection\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95)\n\t\t\tbreak;\n\t\tp += ray_dir * dt;\n\t}\n}`;\n\nexport var fragShaderMIP =\n`#version 300 es\n#line 219\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D volume;\nuniform highp sampler2D colormap;\nuniform ivec3 volume_dims;\nuniform float dt_scale;\nin vec3 vray_dir;\nflat in vec3 transformed_eye;\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// Pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nvoid main(void) {\n\tvec3 ray_dir = normalize(vray_dir);\n\tvec2 t_hit = intersect_box(transformed_eye, ray_dir);\n\tif (t_hit.x > t_hit.y)\n\t\tdiscard;\n\tt_hit.x = max(t_hit.x, 0.0);\n\tvec3 dt_vec = 1.0 / (vec3(volume_dims) * abs(ray_dir));\n\tfloat dt = dt_scale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 640.0 * gl_FragCoord.y));\n\tvec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;\n\tfloat maxA = 0.0;\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tfloat val = texture(volume, p).r;\n\t\t//select maximum intensity. We could write this:\n\t\t// if (val > maxA) maxA = val;\n\t\t//http://theorangeduck.com/page/avoiding-shader-conditionals\n\t\tmaxA = mix(val, maxA, max(sign(maxA - val), 0.0));\n\t\tp += ray_dir * dt;\n\t}\n\tif (maxA > 0.0)\n\t\tcolor = texture(colormap, vec2(maxA, 0.5)).rgba;\n\tcolor.r = 1.0;\n}`;\n\nexport var blurVertShader =\n`#version 300 es\n#line 280\nprecision highp int;\nprecision highp float;\nin vec3 vPos;\nout vec2 TexCoord;\nvoid main() {\n    TexCoord = vPos.xy;\n    gl_Position = vec4( (vPos.xy-vec2(0.5,0.5))* 2.0, 0.0, 1.0);\n}`;\n\nexport var blurFragShader =\n`#version 300 es\n#line 292\nprecision highp int;\nprecision highp float;\nin vec2 TexCoord;\nout vec4 FragColor;\nuniform float coordZ;\nuniform float dX;\nuniform float dY;\nuniform float dZ;\nuniform highp sampler3D intensityVol;\nvoid main(void) {\n vec3 vx = vec3(TexCoord.xy, coordZ);\n vec4 samp = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));\n samp += texture(intensityVol,vx+vec3(+dX,+dY,-dZ));\n samp += texture(intensityVol,vx+vec3(+dX,-dY,+dZ));\n samp += texture(intensityVol,vx+vec3(+dX,-dY,-dZ));\n samp += texture(intensityVol,vx+vec3(-dX,+dY,+dZ));\n samp += texture(intensityVol,vx+vec3(-dX,+dY,-dZ));\n samp += texture(intensityVol,vx+vec3(-dX,-dY,+dZ));\n samp += texture(intensityVol,vx+vec3(-dX,-dY,-dZ));\n FragColor = samp*0.125;\n}`;\n\nexport var sobelFragShader =\n`#version 300 es\n#line 317\nprecision highp int;\nprecision highp float;\nin vec2 TexCoord;\nout vec4 FragColor;\nuniform float coordZ;\nuniform float dX;\nuniform float dY;\nuniform float dZ;\nuniform highp sampler3D intensityVol;\nvoid main(void) {\n  vec3 vx = vec3(TexCoord.xy, coordZ);\n  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft\n  float TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ)).r;\n  float TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ)).r;\n  float TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ)).r;\n  float TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ)).r;\n  float BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ)).r;\n  float BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ)).r;\n  float BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ)).r;\n  float BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ)).r;\n  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);\n  gradientSample.r =   BAR+BAL+BPR+BPL -TAR-TAL-TPR-TPL;\n  gradientSample.g =  TPR+TPL+BPR+BPL -TAR-TAL-BAR-BAL;\n  gradientSample.b =  TAL+TPL+BAL+BPL -TAR-TPR-BAR-BPR;\n  gradientSample.a = (abs(gradientSample.r)+abs(gradientSample.g)+abs(gradientSample.b))*0.29;\n  gradientSample.rgb = normalize(gradientSample.rgb);\n  gradientSample.rgb =  (gradientSample.rgb * 0.5)+0.5;\n  FragColor = gradientSample;\n}`;\n\nexport var fragShaderMatCap =\n`#version 300 es\n#line 350\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D volume;\nuniform highp sampler3D gradients;\nuniform highp sampler2D colormap;\nuniform sampler2D matcap;\nuniform ivec3 volume_dims;\nuniform mat4 proj_view;\nuniform mat4 normal_matrix;\nuniform float dt_scale;\nin vec3 vray_dir;\nflat in vec3 transformed_eye;\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// Pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nmat3 mat3_emu(mat4 m4) {\n//https://www.khronos.org/registry/webgl/conformance-suites/1.0.2/conformance/glsl/matrices/glsl-mat4-to-mat3.html\n  return mat3(\n      m4[0][0], m4[0][1], m4[0][2],\n      m4[1][0], m4[1][1], m4[1][2],\n      m4[2][0], m4[2][1], m4[2][2]);\n}\n\nvoid main(void) {\n\tfloat matCapMix = 1.0; //0..1: 0=100% color from matcap, 1= color is volume*matcap\n\tfloat brighten = 1.0 + (matCapMix/2.0); //modulating makes average intensity darker\n\tvec3 ray_dir = normalize(vray_dir);\n\tvec2 t_hit = intersect_box(transformed_eye, ray_dir);\n\tif (t_hit.x > t_hit.y)\n\t\tdiscard;\n\tt_hit.x = max(t_hit.x, 0.0);\n\tvec3 dt_vec = 1.0 / (vec3(volume_dims) * abs(ray_dir));\n\tfloat dt = dt_scale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 640.0 * gl_FragCoord.y));\n\tvec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;\n\tmat3 normalMatrix = mat3_emu(normal_matrix);\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tfloat val = texture(volume, p).r;\n\t\tvec4 val_color = texture(colormap, vec2(val, 0.5)).rgba;\n\t\tvec4 gradSample = texture(gradients, p);\n\t\tgradSample.rgb = normalize(gradSample.rgb*2.0 - 1.0);\n\t\tvec3 n = normalize(normalMatrix * gradSample.rgb);\n\t\tvec2 uv = n.xy * 0.5 + 0.5;\n\t\tuv.y = 1.0 - uv.y;\n\t\tvec3 matcap_color = texture(matcap, vec2(uv.xy)).rgb;\n\t\tmatcap_color = mix(val_color.rgb, matcap_color, matCapMix);\n\t\tval_color.rgb = val_color.rgb * matcap_color * brighten;\n\t\tval_color.a = 1.0-pow((1.0 - val_color.a), dt_scale); //opacityCorrection\n\t\tcolor.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;\n\t\tcolor.a += (1.0 - color.a) * val_color.a;\n\t\tif (color.a >= 0.95)\n\t\t\tbreak;\n\t\tp += ray_dir * dt;\n\t}\n}`;\n\nexport var vertSliceShader =\n`#version 300 es\n#line 434\nlayout(location=0) in vec3 pos;\nuniform int axCorSag;\nuniform float slice;\nuniform vec4 leftBottomWidthHeight;\nout vec3 texPos;\nvoid main(void) {\n\tgl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n\tgl_Position.x = leftBottomWidthHeight.x + (pos.x * leftBottomWidthHeight.b);\n\tgl_Position.y = leftBottomWidthHeight.y + (pos.y * leftBottomWidthHeight.a);\n\tif (axCorSag == 1) \n\t\ttexPos = vec3(pos.x, slice, pos.y);\t\n\telse if (axCorSag == 2) \n\t\ttexPos = vec3(slice, pos.x, pos.y);\t\n\telse\n\t\ttexPos = vec3(pos.xy, slice);\n}`;\n\nexport var fragSliceShader =\n`#version 300 es\n#line 456\nprecision highp int;\nprecision highp float;\nuniform highp sampler3D volume;\nuniform highp sampler2D colormap;\nin vec3 texPos;\nout vec4 color;\nvoid main() {\n    //color = vec4(texPos, 1.0); //show texture sample location\n    //color = texture(volume, texPos); //show color index\n    float val = texture(volume, texPos).r;\n\t//color = texture(colormap, vec2(val, 0.5)); //apply color scheme, use texture Alpha\n\tcolor = vec4(texture(colormap, vec2(val, 0.5)).rgb, 1.0); //apply color scheme, use texture Alpha\t\n}`;\n\nexport var vertLineShader =\n`#version 300 es\n#line 434\nlayout(location=0) in vec3 pos;\nuniform vec4 leftBottomWidthHeight;\nvoid main(void) {\n\tgl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n\tgl_Position.x = leftBottomWidthHeight.x + (pos.x * leftBottomWidthHeight.b);\n\tgl_Position.y = leftBottomWidthHeight.y + (pos.y * leftBottomWidthHeight.a);\n}`;\n\nexport var fragLineShader =\n`#version 300 es\n#line 456\nprecision highp int;\nprecision highp float;\nuniform vec4 lineColor;\nout vec4 color;\nvoid main() {\n\tcolor = lineColor;\n\t//color = vec4(1.0, 0.0, 0.0, 1.0);\t\n}`;","// import * as glmat from \"gl-matrix\"\nimport * as nii from \"nifti-reader-js\"\nimport { Shader } from \"./webgl-util/shader.js\";\nimport { vertSliceShader, fragSliceShader } from \"./shader-srcs.js\";\nimport { vertLineShader, fragLineShader } from \"./shader-srcs.js\";\n\nexport var colormapTexture = null\nexport var volumeTexture = null\nexport var sliceShader = null //program for 2D slice views\nexport var lineShader = null //program for cross-hairs\nexport var crosshairWidth = 0.005;\nexport var crosshairColor =  [1, 0, 0, 1];\nexport var crosshairPos = [0.5, 0.5, 0.5];\nexport var backColor =  [0, 0, 0, 1];\n\n//export var mouse = {x: -1, y:-1}\n\nexport function getGL() {\n\n  var gl = document.querySelector(\"#gl\").getContext(\"webgl2\")\n  if (!gl) {\n    return null\n  }\n  return gl\n\n}\nfunction scaleTo8Bit(A, overlayItem) {\n  var volume = overlayItem.volume\n\tvar mn = volume.hdr.cal_min;\n\tvar mx = volume.hdr.cal_max;\n\tvar vox = A.length\n\tvar img8 = new Uint8ClampedArray(vox);\n\tvar scale = 1;\n\tvar i\n\tif (mx > mn) scale = 255 / (mx - mn);\n\tfor (i = 0; i < (vox - 1); i++) {\n\t\tvar v = A[i];\n\t\tv = (v * volume.hdr.scl_slope) + volume.hdr.scl_inter;\n\t\timg8[i] = (v - mn) * scale;\n\t}\n\treturn img8 // return scaled\n}\n\nexport function calibrateIntensity(A, overlayItem) {\n  var volume = overlayItem.volume\n  var vox = A.length;\n\tvar mn = Infinity;\n\tvar mx = -Infinity;\n\tvar i\n\tfor (i = 0; i < (vox - 1); i++) {\n\t\tif (!isFinite(A[i])) continue;\n\t\tif (A[i] < mn) mn = A[i];\n\t\tif (A[i] > mx) mx = A[i];\n\t}\n\t//calibrate intensity\n\tif ((isFinite(volume.hdr.scl_slope)) && (isFinite(volume.hdr.scl_inter)) && (volume.hdr.scl_slope !== 0.0)) {\n\t\t//console.log(\">> mn %f mx %f %f %f\", mn, mx, hdr.scl_slope, hdr.scl_inter);\n\t\tmn = (mn * volume.hdr.scl_slope) + volume.hdr.scl_inter;\n\t\tmx = (mx * volume.hdr.scl_slope) + volume.hdr.scl_inter;\n\t} else {\n\t\tvolume.hdr.scl_slope = 1.0;\n\t\tvolume.hdr.scl_inter = 0.0;\n\t}\n\t//console.log(\"vx %d type %d mn %f mx %f\", vox, hdr.datatypeCode, mn, mx);\n\t//console.log(\"cal mn..mx %f..%f\", hdr.cal_min, hdr.cal_max);\n\tvolume.hdr.global_min = mn;\n\tvolume.hdr.global_max = mx;\n\tif ((!isFinite(volume.hdr.cal_min)) || (!isFinite(volume.hdr.cal_max)) || (volume.hdr.cal_min >= volume.hdr.cal_max)) {\n\t\tvolume.hdr.cal_min = mn;\n\t\tvolume.hdr.cal_max = mx;\n\t}\n}\n\nexport function loadVolume(overlayItem) {\n\tvar hdr = null\n\tvar img = null\n  var url = overlayItem.volumeURL\n\t// var volume = Object\n\tvar req = new XMLHttpRequest();\n\treq.open(\"GET\", url, true);\n\treq.responseType = \"arraybuffer\";\n\treq.onerror = function () {\n\t\tconsole.log = \"Error Loading Volume\";\n\t};\n\treq.onload = function () {\n\t\tvar dataBuffer = req.response;\n\t\tif (dataBuffer) {\n\t\t\thdr = nii.readHeader(dataBuffer);\n\t\t\tif (nii.isCompressed(dataBuffer)) {\n\t\t\t\timg = nii.readImage(hdr, nii.decompress(dataBuffer));\n\t\t\t} else {\n\t\t\t\timg = nii.readImage(hdr, dataBuffer);\n\t\t\t}\n\t\t\t//img = new Uint8Array(img);\n\t\t} else {\n\n\t\t\talert(\"Unable to load buffer properly from volume?\");\n\t\t\tconsole.log(\"no buffer?\");\n\t\t}\n\t\toverlayItem.volume.hdr = hdr\n\t\toverlayItem.volume.img = img\n\n\t};\n\treq.send();\n\treturn\n}\n\nexport function init(gl) {\n\t//initial setup: only at the startup of the component\n\tconsole.log(\"niivue: init\");\n\tsliceShader = new Shader(gl, vertSliceShader, fragSliceShader);\n\tsliceShader.use(gl)\n\tgl.uniform1i(sliceShader.uniforms[\"volume\"], 0);\n\tgl.uniform1i(sliceShader.uniforms[\"colormap\"], 1);\n\tlineShader = new Shader(gl, vertLineShader, fragLineShader);\n}\n\nexport function updateGLVolume(gl, overlayItem) { //load volume or change contrast\n\tvar cubeStrip = [0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0];\n\tvar vao = gl.createVertexArray();\n\tgl.bindVertexArray(vao);\n\tvar vbo = gl.createBuffer();\n\tgl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(cubeStrip), gl.STATIC_DRAW);\n\tgl.enableVertexAttribArray(0);\n\tgl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);\n\t// selectColormap(gl, \"gray\")\n\tvar hdr = overlayItem.volume.hdr\n\tvar img = overlayItem.volume.img\n\t// console.log(hdr)\n\t// var vox = hdr.dims[1] * hdr.dims[2] * hdr.dims[3];\n\tvar imgRaw = null\n\tif (hdr.datatypeCode === 2) //data already uint8\n\t\timgRaw = new Uint8Array(img);\n\telse if (hdr.datatypeCode === 4)\n\t\timgRaw = new Int16Array(img);\n\telse if (hdr.datatypeCode === 16)\n\t\timgRaw = new Float32Array(img);\n\telse if (hdr.datatypeCode === 512)\n\t\timgRaw = new Uint16Array(img);\n\tcalibrateIntensity(imgRaw, overlayItem)\n\tvar img8 = scaleTo8Bit(imgRaw, overlayItem)\n\t// console.log(img8)\n\tif (volumeTexture)\n\t\tgl.deleteTexture(volumeTexture);\n\tvolumeTexture = gl.createTexture();\n\tgl.activeTexture(gl.TEXTURE0);\n\tgl.bindTexture(gl.TEXTURE_3D, volumeTexture);\n\tgl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\tgl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\tgl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\tgl.pixelStorei(gl.UNPACK_ALIGNMENT, 1)\n\tgl.texStorage3D(gl.TEXTURE_3D, 1, gl.R8, hdr.dims[1], hdr.dims[2], hdr.dims[3]);\n\tgl.texSubImage3D(gl.TEXTURE_3D, 0, 0, 0, 0, hdr.dims[1], hdr.dims[2], hdr.dims[3], gl.RED, gl.UNSIGNED_BYTE, img8);\n\t/*\n\t//Volume Rendering values:\n\tvar dims = [1.0, hdr.dims[1] * hdr.pixDims[1], hdr.dims[2] * hdr.pixDims[2], hdr.dims[3] * hdr.pixDims[3]];\n\tvar longestAxis = Math.max(dims[1], Math.max(dims[2], dims[3]));\n\tvar volScale = [dims[1] / longestAxis, dims[2] / longestAxis, dims[3] / longestAxis];\n\tshader.use(gl)\n\tgl.uniform3iv(shader.uniforms[\"volume_dims\"], [hdr.dims[1], hdr.dims[2], hdr.dims[3]]);\n\tgl.uniform3fv(shader.uniforms[\"volume_scale\"], volScale);\n\t*/\n\t/*if (sliceShader)\n\t\tgl.deleteShader(sliceShader);\n\tsliceShader = new Shader(gl, vertSliceShader, fragSliceShader);\n\tsliceShader.use(gl)\n\tgl.uniform1i(sliceShader.uniforms[\"volume\"], 0);\n\tgl.uniform1i(sliceShader.uniforms[\"colormap\"], 1);*/\n\tdrawSlices(gl, overlayItem)\n} // updateVolume()\n\nexport function selectColormap(gl, lutName = \"\") {\n\tvar lut = makeLut([0, 255], [0, 255], [0, 255], [0, 128], [0, 255]); //gray\n\tif (lutName === \"Plasma\")\n\t\tlut = makeLut([13, 156, 237, 240], [8, 23, 121, 249], [135, 158, 83, 33], [0, 56, 80, 88], [0, 64, 192, 255]); //plasma\n\tif (lutName === \"Viridis\")\n\t\tlut = makeLut([68, 49, 53, 253], [1, 104, 183, 231], [84, 142, 121, 37], [0, 56, 80, 88], [0, 65, 192, 255]);//viridis\n\tif (lutName === \"Inferno\")\n\t\tlut = makeLut([0, 120, 237, 240], [0, 28, 105, 249], [4, 109, 37, 33], [0, 56, 80, 88], [0, 64, 192, 255]);//inferno\n\tif (colormapTexture !== null)\n\t\tgl.deleteTexture(colormapTexture);\n\tcolormapTexture = gl.createTexture();\n\tgl.activeTexture(gl.TEXTURE1);\n\tgl.bindTexture(gl.TEXTURE_2D, colormapTexture);\n\tgl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA8, 256, 1);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\n\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\tgl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, 256, 1, gl.RGBA, gl.UNSIGNED_BYTE, lut);\n\tconsole.log(\"set colormap\")\n} // selectColormap()\n\nfunction makeLut(Rs, Gs, Bs, As, Is) {\n\t//create color lookup table provided arrays of reds, greens, blues, alphas and intensity indices\n\t//intensity indices should be in increasing order with the first value 0 and the last 255.\n\t// makeLut([0, 255], [0, 0], [0,0], [0,128],[0,255]); //red gradient\n\tvar lut = new Uint8ClampedArray(256 * 4);\n\tfor (var i = 0; i < (Is.length - 1); i++) {\n\t\t//return a + f * (b - a);\n\t\tvar idxLo = Is[i];\n\t\tvar idxHi = Is[i + 1];\n\t\tvar idxRng = idxHi - idxLo;\n\t\tvar k = idxLo * 4;\n\t\tfor (var j = idxLo; j <= idxHi; j++) {\n\t\t\tvar f = (j - idxLo) / idxRng;\n\t\t\tlut[k] = Rs[i] + f * (Rs[i + 1] - Rs[i]); //Red\n\t\t\tk++;\n\t\t\tlut[k] = Gs[i] + f * (Gs[i + 1] - Gs[i]); //Green\n\t\t\tk++;\n\t\t\tlut[k] = Bs[i] + f * (Bs[i + 1] - Bs[i]); //Blue\n\t\t\tk++;\n\t\t\tlut[k] = As[i] + f * (As[i + 1] - As[i]); //Alpha\n\t\t\tk++;\n\t\t}\n\t}\n\t//console.log(lut)\n\treturn lut;\n} // makeLut()\n\nfunction sliceScale(gl, overlayItem) {\n\tvar hdr = overlayItem.volume.hdr\n\tconsole.log(\"viewport (w,h):\", gl.canvas.width, gl.canvas.height)\n\tvar dims = [1.0, hdr.dims[1] * hdr.pixDims[1], hdr.dims[2] * hdr.pixDims[2], hdr.dims[3] * hdr.pixDims[3]];\n\tvar longestAxis = Math.max(dims[1], Math.max(dims[2], dims[3]));\n\tvar volScale = [dims[1] / longestAxis, dims[2] / longestAxis, dims[3] / longestAxis];\n\tconsole.log(\"volScale (x,y,z):\", volScale)\n\t//gl.canvas.style.backgroundColor = \"black\"\n\tvar AR = [gl.canvas.clientHeight / gl.canvas.clientWidth, 1.0];\n\tif (AR[0] > 1.0) {\n\t\tAR[1] = gl.canvas.clientWidth / gl.canvas.clientHeight;\n\t\tAR[0] = 1.0;\n\t}\n\tconsole.log(\"Canvas aspect ratio (x,y):\", AR[0], AR[1])\n\treturn { volScale, AR }\n}\n\nexport function mouseClick(gl, overlayItem, x, y) {\n\tconsole.log(\"Click pixels (x,y):\", x, y);\n\tlet {volScale, AR} = sliceScale(gl, overlayItem);\n\tif ((gl.canvas.height < 1) || (AR[0] <= 0) || (AR[1] <= 0) || (volScale[0] <= 0) || (volScale[1] <= 0) || (volScale[2] <= 0)) return;\n\t//mouse click X,Y in screen coordinates, origin at top left  \n\t// webGL clip space L,R,T,B = [-1, 1, 1, 1] \n\t// n.b. webGL Y polarity reversed\n\t// https://webglfundamentals.org/webgl/lessons/webgl-fundamentals.html\n\tvar glx = ((x / gl.canvas.width) - 0.5) * 2.0;\n\tvar gly = (((gl.canvas.height - y) / (gl.canvas.height)) - 0.5) * 2.0;\n\tconsole.log(\"Click clip space (x,y):\", glx, gly);\n\t//test axial\n\tvar w = volScale[0] * AR[0];\n\tvar h = volScale[1] * AR[1];\n\tif ((glx >= -w) && (glx < 0.0) && (gly >= -h) && (gly < 0.0)) {\n\t\tcrosshairPos[0] = (glx + w) / w;\n\t\tcrosshairPos[1] = (gly + h) / h;\n\t\tconsole.log(\"Axial click (x,y,z)\", crosshairPos); //click defines x,y\n\t\tdrawSlices(gl, overlayItem);\n\t}\n\t//test coronal\n\tw = volScale[0] * AR[0];\n\th = volScale[2] * AR[1];\n\tif ((glx >= -w) && (glx < 0.0) && (gly > 0.0) && (gly < h)) {\n\t\tcrosshairPos[0] = (glx + w) / w;\n\t\tcrosshairPos[2] = (gly) / h;\n\t\tconsole.log(\"Coronal click (x,y,z)\", crosshairPos); //click defines x,z\n\t\tdrawSlices(gl, overlayItem);\n\t}\n\t//test sagittal\n\tw = volScale[1] * AR[0];\n\th = volScale[2] * AR[1];\n\tif ((glx > 0.0) && (glx < w) && (gly >= 0.0) && (gly < h)) {\n\t\tcrosshairPos[1] = (glx) / w;\n\t\tcrosshairPos[2] = (gly) / h;\n\t\tconsole.log(\"Sagittal click (x,y,z)\", crosshairPos); //click defines y,z\n\t\tdrawSlices(gl, overlayItem);\n\t}\t\n}\n\nexport function drawSlices(gl, overlayItem) {\n\tlet {volScale, AR} = sliceScale(gl, overlayItem);\n\tgl.clearColor(backColor[0], backColor[1], backColor[2], backColor[3]);\n\tgl.clear(gl.COLOR_BUFFER_BIT);\n\tgl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\tsliceShader.use(gl);\n\t//draw axial\n\tvar w = volScale[0] * AR[0];\n\tvar h = volScale[1] * AR[1];\n\tconsole.log(\"Axial (w,h):\", w, h)\n\tgl.uniform1i(sliceShader.uniforms[\"axCorSag\"], 0);\n\tgl.uniform1f(sliceShader.uniforms[\"slice\"], crosshairPos[2]);\n\tgl.uniform4f(sliceShader.uniforms[\"leftBottomWidthHeight\"], -w, -h, w, h);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\t//draw coronal\n\tw = volScale[0] * AR[0];\n\th = volScale[2] * AR[1];\n\tconsole.log(\"Coronal (w,h):\", w, h)\n\tgl.uniform1i(sliceShader.uniforms[\"axCorSag\"], 1);\n\tgl.uniform1f(sliceShader.uniforms[\"slice\"], crosshairPos[1]);\n\tgl.uniform4f(sliceShader.uniforms[\"leftBottomWidthHeight\"], -w, 0, w, h);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\t//draw sagittal\n\tw = volScale[1] * AR[0];\n\th = volScale[2] * AR[1];\n\tconsole.log(\"Sagittal (w,h):\", w, h)\n\tgl.uniform1i(sliceShader.uniforms[\"axCorSag\"], 2);\n\tgl.uniform1f(sliceShader.uniforms[\"slice\"], crosshairPos[0]);\n\tgl.uniform4f(sliceShader.uniforms[\"leftBottomWidthHeight\"], 0, 0, w, h);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\n\tif (crosshairWidth <= 0.0) {\n\t\tgl.finish()\n\t\treturn;\n\t}\n\tvar a = crosshairPos[2];\n\tvar c = crosshairPos[1];\n\tvar s = crosshairPos[0];\n\t\n\tlineShader.use(gl)\n\tgl.uniform4fv(lineShader.uniforms[\"lineColor\"], crosshairColor);\n\t//console.log(\"drawing axial crosshairs\")\n\tw = volScale[0] * AR[0];\n\th = volScale[1] * AR[1];\n\tgl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], -w, -h+(c* h)-crosshairWidth, w, crosshairWidth);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\tgl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], -w+(s* w)-crosshairWidth, -h, crosshairWidth, h);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\n\t//console.log(\"drawing coronal crosshairs\")\n\tw = volScale[0] * AR[0];\n\th = volScale[2] * AR[1];\n\tgl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], -w, 0+(a* h)-crosshairWidth, w, crosshairWidth);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\tgl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], -w+(s* w)-crosshairWidth, 0, crosshairWidth, h);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\n\t//console.log(\"drawing sagittal crosshairs\")\n\tw = volScale[1] * AR[0];\n\th = volScale[2] * AR[1];\n\t//gl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], -w, h+(c* h)-crosshairWidth, w, crosshairWidth);\n\tgl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], 0, 0+(a* h)-crosshairWidth, w, crosshairWidth);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\tgl.uniform4f(lineShader.uniforms[\"leftBottomWidthHeight\"], 0+(c* w)-crosshairWidth, 0, crosshairWidth, h);\n\tgl.drawArrays(gl.TRIANGLE_STRIP, 5, 4);\n\t// gl.viewport(gl.canvas.width / 2, 0, gl.canvas.width / 2, gl.canvas.height / 2);\n\t// Wait for rendering to actually finish\n\tgl.finish()\n}\n","<template>\n  <div id=\"viewer\" ></div>\n</template>\n<script>\nimport * as nv from \"../niivue.js\";\n\nexport default {\n  name: \"glviewer\",\n  /*\n  props are passed to the nii-vue component from it's parent\n  they can be used. Similar to passing variables to a function\n  */\n  props: {\n    overlays: Array,\n    shader: String,\n  },\n  data() {\n    return {\n      selectedOverlay: 0\n    };\n  },\n  watch: {\n    // watch for changes to hdr property of volume object\n    // this detects changes from hdr=null to hdr=real_data\n    overlays: {\n      deep: true,\n      handler () {\n        nv.selectColormap(this.gl, this.overlays[this.selectedOverlay].colorMap)\n        nv.updateGLVolume(this.gl, this.overlays[this.selectedOverlay])\n    },\n\n    }\n    \n      },\n  methods: {\n    onWindowResize: function() {\n      var canvas = document.querySelector(\"#gl\") \n      var viewer = document.querySelector(\"#viewer\")\n      canvas.width = viewer.offsetWidth-1\n      canvas.height = viewer.offsetHeight-1\n      nv.drawSlices(this.gl, this.overlays[this.selectedOverlay])\n    }\n  },\n  mounted() {\n    // get the gl context after the component has been mounted and initialized\n    const glEl = document.createElement('canvas')\n    const viewer = document.querySelector(\"#viewer\")\n    glEl.id = \"gl\"\n    glEl.width = viewer.offsetWidth-1\n    glEl.height = viewer.offsetHeight-1\n    viewer.appendChild(glEl)\n    const canvas = document.querySelector(\"#gl\");\n    const gl = canvas.getContext(\"webgl2\");\n    gl.canvas.addEventListener('mousedown', (e) => {\n      const rect = canvas.getBoundingClientRect()\n      //nv.mouse.x = e.clientX - rect.left\n      //nv.mouse.y = e.clientY - rect.top\n      nv.mouseClick(this.gl, this.overlays[0], e.clientX - rect.left, e.clientY - rect.top)\n      //console.log(nv.mouse)\n    })\n\n    window.addEventListener('resize', this.onWindowResize)\n    this.gl = gl;\n    this.gl.enable(this.gl.CULL_FACE);\n    this.gl.cullFace(this.gl.FRONT);\n    this.gl.enable(this.gl.BLEND);\n    this.gl.blendFunc(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\n    nv.init(this.gl);\n    nv.loadVolume(this.overlays[this.selectedOverlay]); // just load first overlay. addtional overlays are not handled yet\n\n  },\n};\n</script>\n\n<style scoped>\n#viewer {\n  background-color: black;\n  width: 100%;\n  height:100%;\n  min-height: 600px;\n  max-height: 600px;\n  min-width: 600px;\n  max-width: 1200px;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n\nbody {\n  background-color: black;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./glviewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./glviewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./glviewer.vue?vue&type=template&id=6a2d1314&scoped=true&\"\nimport script from \"./glviewer.vue?vue&type=script&lang=js&\"\nexport * from \"./glviewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./glviewer.vue?vue&type=style&index=0&id=6a2d1314&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a2d1314\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app>\n    <v-app-bar app>\n      Toolbar\n    </v-app-bar>\n\n    <v-main>\n      <v-row>\n      <!-- app uses a 12 column layout, so the controls take up 4 columns on the left of the screen -->\n      <v-col cols=\"4\">\n        <controls :overlays=\"overlayList\">\n        </controls>\n      </v-col>\n\n      <v-col cols=\"8\">\n        <glviewer :overlays=\"overlayList\"></glviewer>\n      </v-col>\n      \n    </v-row>\n\n    </v-main>\n\n    <v-footer app>\n      <v-row >\n        <v-col align=\"center\" justify=\"center\" >\n          coordinates: x, y, z\n        </v-col>\n        <v-col align=\"center\" justify=\"center\" >\n          region: N/A\n        </v-col>\n\n      </v-row>\n    </v-footer>\n\n  </v-app>\n</template>\n\n<script>\nimport controls from './components/controls.vue'\nimport glviewer from './components/glviewer.vue'\n\nexport default {\n  name: 'App',\n\n  components: {\n    controls,\n    glviewer\n  },\n\n  data (){\n    return {\n      overlayList: [\n        {\n          volumeURL: \"./mni152.nii.gz\",\n          volume: {hdr: null, img: null},\n          name: \"mni152.nii.gz\",\n          intensityMin: 0,\n          intensityMax: 100,\n          intensityRange:[0, 100],\n          colorMap: \"gray\", // gray\n          opacity: 100,\n        },\n        {\n          volumeURL: \"./chris_T1.nii.gz\",\n          volume: {hdr: null, img: null},\n          name: \"chris_T1.nii.gz\",\n          intensityMin: 0,\n          intensityMax: 100,\n          intensityRange:[0, 100],\n          colorMap: \"gray\", // gray\n          opacity: 100,\n        }\n      ]\n    }\n  },\n};\n</script>\n\n<style scoped>\n\n  .scene-controls {\n    height: 140px;\n    width: auto;\n  }\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4090a82b&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4090a82b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4090a82b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VFooter } from 'vuetify/lib/components/VFooter';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VAppBar,VCol,VFooter,VMain,VRow})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib/framework';\nimport 'vuetify/dist/vuetify.min.css'\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify';\n\n\nVue.config.productionTip = false\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./glviewer.vue?vue&type=style&index=0&id=6a2d1314&scoped=true&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4090a82b&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controls.vue?vue&type=style&index=0&id=7a52731c&scoped=true&lang=css&\""],"sourceRoot":""}